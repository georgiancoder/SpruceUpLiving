<section class="max-w-7xl mx-auto px-5 sm:px-6 lg:px-8 mb-10 lg:mb-14">
  <div class="grid lg:grid-cols-[2.2fr_1.2fr] gap-6 items-start">
    <!-- Main Hero Card -->
    <article
      class="group bg-gradient-to-br h-full from-amber-100/40 via-amber-50/30 to-white/30 rounded-3xl p-7 lg:p-8 shadow-xl shadow-amber-200/40 group-hover:shadow-2xl group-hover:shadow-amber-300/50 transition-all duration-500 border border-amber-200/60 backdrop-blur-sm relative overflow-hidden"
      (mouseenter)="setPaused(true)"
      (mouseleave)="setPaused(false)"
      (focusin)="setPaused(true)"
      (focusout)="setPaused(false)"
    >
      <ng-container *ngIf="activeSlide() as s">
        <!-- fade ONLY slide content (not the container / controls) -->
        <div class="hero-fade" [class.hero-fade--out]="isFading()">
          <!-- background image (optional) -->
          <div
            *ngIf="s.imageUrl"
            class="absolute inset-0 bg-center bg-cover"
            [style.backgroundImage]="'url(' + s.imageUrl + ')'"
            aria-hidden="true"
          ></div>
          <div class="absolute inset-0 bg-gradient-to-br from-amber-100/90 via-amber-50/80 to-white/80" aria-hidden="true"></div>

          <div class="relative">
            <!-- ...existing chips... -->
            <div class="flex flex-wrap gap-1.5 mb-5">
              <span *ngFor="let tag of s.tags" class="px-3 py-1.5 text-xs font-semibold rounded-full bg-white/70 border border-amber-300/70 text-amber-800 shadow-sm">{{tag}}</span>
            </div>

            <h1 class="text-2xl lg:text-3xl font-bold text-slate-900 leading-tight mb-3 lg:mb-4 group-hover:text-amber-900 transition-colors">
              {{ s.title }}
            </h1>

            <!-- ...existing meta row can be slide-driven later if desired... -->
            <div class="flex items-center gap-4 text-sm text-amber-700 mb-4 opacity-90">
              <span *ngFor="let category of s.categories">{{category}}</span>
              <span>• {{s.readMinutes}} min read</span>
            </div>

            <p *ngIf="s.subtitle" class="text-base lg:text-lg text-slate-700 leading-relaxed max-w-prose mb-8 lg:mb-10">
              {{ s.subtitle }}
            </p>
          </div>

          <div class="relative flex items-center justify-between pt-6 border-t border-amber-200/50">
            <a
              *ngIf="s.ctaLabel"
              [href]="s.ctaHref || '#'"
              class="group/btn flex items-center gap-2 px-5 py-2.5 rounded-full bg-white border border-amber-300/60 text-amber-800 font-semibold text-sm shadow-lg shadow-amber-200/50 hover:shadow-xl hover:shadow-amber-300/60 hover:bg-amber-50/50 transition-all duration-300 group-hover/btn:scale-105"
            >
              {{ s.ctaLabel }}
              <svg class="w-4 h-4 group-hover/btn:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
              </svg>
            </a>

            <div class="flex items-center gap-1.5" aria-label="Slider dots">
              <button
                *ngFor="let _ of slides; let i = index"
                type="button"
                class="h-2 rounded-full transition-all duration-300 cursor-pointer hover:bg-amber-400/80"
                [ngClass]="{
                  'bg-amber-400/80': i === index(),
                  'w-4': i === index(),
                  'bg-opacity-70': i === index(),
                  'w-2': i !== index(),
                  'bg-white': i !== index(),
                  'bg-opacity-50': i !== index()
                }"
                (click)="goTo(i)"
                [attr.aria-label]="'Go to slide ' + (i + 1)"
                [attr.aria-current]="i === index() ? 'true' : null"
              ></button>
            </div>
          </div>
        </div>

        <!-- nav arrows (do NOT fade) -->
        <button
          type="button"
          class="absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/70 border border-amber-300/60 text-amber-900 shadow-md hover:bg-white hover:shadow-lg transition"
          (click)="prev()"
          aria-label="Previous slide"
        >
          <span aria-hidden="true">‹</span>
        </button>
        <button
          type="button"
          class="absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-white/70 border border-amber-300/60 text-amber-900 shadow-md hover:bg-white hover:shadow-lg transition"
          (click)="next()"
          aria-label="Next slide"
        >
          <span aria-hidden="true">›</span>
        </button>
      </ng-container>

      <ng-container *ngIf="!hasSlides()">
        <!-- ...existing static fallback could live here if you want... -->
      </ng-container>
    </article>

    <!-- Side Popular Posts -->
    <div class="space-y-4 lg:space-y-4">
      <article
        *ngFor="let p of popularPostsResolved(); let i = index"
        class="group flex gap-4 p-4 rounded-2xl bg-white/80 border border-amber-200/70 shadow-md hover:shadow-xl hover:shadow-amber-200/60 hover:-translate-y-1 transition-all duration-300 backdrop-blur-sm hover:bg-white/95 cursor-pointer"
        [ngClass]="{
          'ring-1 ring-amber-400/60 bg-white/95 shadow-xl shadow-amber-200/50': sidebarIsActive(p, i)
        }"
        (click)="goTo(sidebarSlideIndex(p, i))"
        (keydown.enter)="goTo(sidebarSlideIndex(p, i))"
        (keydown.space)="goTo(sidebarSlideIndex(p, i)); $event.preventDefault()"
        role="button"
        tabindex="0"
        [attr.aria-current]="sidebarIsActive(p, i) ? 'true' : null"
      >
        <div
          class="w-20 h-20 rounded-2xl bg-gradient-to-br from-amber-200/80 to-amber-400/60 shadow-md bg-center bg-cover"
          [style.backgroundImage]="p.imageUrl ? 'url(' + p.imageUrl + ')' : null"
          aria-hidden="true"
        ></div>

        <div class="flex-1 min-w-0">
          <p *ngIf="p.subtitle" class="text-xs uppercase tracking-wide text-amber-700 font-semibold mb-1">
            {{ p.subtitle }}
          </p>
          <h3
            class="text-lg font-bold text-slate-900 leading-tight transition-colors line-clamp-2"
            [ngClass]="{ 'text-amber-900': sidebarIsActive(p, i), 'group-hover:text-amber-900': !sidebarIsActive(p, i) }"
          >
            {{ p.title }}
          </h3>
          <p class="text-sm text-slate-600 mt-1" *ngIf="p.ctaLabel">
            {{ p.ctaLabel }}
          </p>
        </div>

        <!-- progress bar (only for active slide in sidebar) -->
        <div
          *ngIf="i === activeSidebarIndex()"
          class="absolute left-4 right-4 bottom-2 h-1 rounded-full bg-amber-100 overflow-hidden"
          aria-hidden="true"
        >
          <div
            class="h-full bg-amber-400/80 rounded-full"
            [style.width.%]="progress() * 100"
          ></div>
        </div>
      </article>
    </div>
  </div>
</section>
